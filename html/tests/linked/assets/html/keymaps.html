
<section id=keymaps>
    <h2>Key Maps</h2>

    <p>Key maps are ways to associate keys and mouse buttons with
    functionality. A key map is an object mapping strings that
    identify the buttons to functions that implement their
    functionality.</p>

    <p>The CodeMirror distributions comes
    with <a href="../demo/emacs.html">Emacs</a>, <a href="../demo/vim.html">Vim</a>,
    and <a href="../demo/sublime.html">Sublime Text</a>-style keymaps.</p>

    <p>Keys are identified either by name or by character.
    The <code>CodeMirror.keyNames</code> object defines names for
    common keys and associates them with their key codes. Examples of
    names defined here are <code>Enter</code>, <code>F5</code>,
    and <code>Q</code>. These can be prefixed
    with <code>Shift-</code>, <code>Cmd-</code>, <code>Ctrl-</code>,
    and <code>Alt-</code> to specify a modifier. So for
    example, <code>Shift-Ctrl-Space</code> would be a valid key
    identifier.</p>

    <p>Common example: map the Tab key to insert spaces instead of a tab
    character.</p>

    <pre data-lang="javascript">
editor.setOption("extraKeys", {
  Tab: function(cm) {
    var spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
    cm.replaceSelection(spaces);
  }
});</pre>

    <p>Alternatively, a character can be specified directly by
    surrounding it in single quotes, for example <code>'$'</code>
    or <code>'q'</code>. Due to limitations in the way browsers fire
    key events, these may not be prefixed with modifiers.</p>

    <p>To bind mouse buttons, use the names `LeftClick`,
    `MiddleClick`, and `RightClick`. These can also be prefixed with
    modifiers, and in addition, the word `Double` or `Triple` can be
    put before `Click` (as in `LeftDoubleClick`) to bind a double- or
    triple-click. The function for such a binding is passed the
    position that was clicked as second argument.</p>

    <p id="normalizeKeyMap">Multi-stroke key bindings can be specified
    by separating the key names by spaces in the property name, for
    example <code>Ctrl-X Ctrl-V</code>. When a map contains
    multi-stoke bindings or keys with modifiers that are not specified
    in the default order (<code>Shift-Cmd-Ctrl-Alt</code>), you must
    call <code>CodeMirror.normalizeKeyMap</code> on it before it can
    be used. This function takes a keymap and modifies it to normalize
    modifier order and properly recognize multi-stroke bindings. It
    will return the keymap itself.</p>

    <p>The <code>CodeMirror.keyMap</code> object associates key maps
    with names. User code and key map definitions can assign extra
    properties to this object. Anywhere where a key map is expected, a
    string can be given, which will be looked up in this object. It
    also contains the <code>"default"</code> key map holding the
    default bindings.</p>

    <p>The values of properties in key maps can be either functions of
    a single argument (the CodeMirror instance), strings, or
    <code>false</code>. Strings refer
    to <a href="#commands">commands</a>, which are described below. If
    the property is set to <code>false</code>, CodeMirror leaves
    handling of the key up to the browser. A key handler function may
    return <code>CodeMirror.Pass</code> to indicate that it has
    decided not to handle the key, and other handlers (or the default
    behavior) should be given a turn.</p>

    <p>Keys mapped to command names that start with the
    characters <code>"go"</code> or to functions that have a
    truthy <code>motion</code> property (which should be used for
    cursor-movement actions) will be fired even when an
    extra <code>Shift</code> modifier is present (i.e. <code>"Up":
    "goLineUp"</code> matches both up and shift-up). This is used to
    easily implement shift-selection.</p>

    <p>Key maps can defer to each other by defining
    a <code>fallthrough</code> property. This indicates that when a
    key is not found in the map itself, one or more other maps should
    be searched. It can hold either a single key map or an array of
    key maps.</p>

    <p>When a key map needs to set something up when it becomes
    active, or tear something down when deactivated, it can
    contain <code>attach</code> and/or <code>detach</code> properties,
    which should hold functions that take the editor instance and the
    next or previous keymap. Note that this only works for the
    <a href="#option_keyMap">top-level keymap</a>, not for fallthrough
    maps or maps added
    with <a href="#option_extraKeys"><code>extraKeys</code></a>
    or <a href="#addKeyMap"><code>addKeyMap</code></a>.</p>
</section>
